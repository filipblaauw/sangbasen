<template name="Song">
  <div class="ui container">
    <div class="ui stackable right aligned grid">
      <div class="left floated left aligned four wide column">
        <a class="ui tiny animated button left floated" tabindex="0" href="{{pathFor route='Home'}}">
          <div class="visible content">Tilbake
          </div>
          <div class="hidden content">
          <i class="left arrow icon"></i>
          </div>
        </a>
      </div>
      <div class="right floated right aligned twelve wide column">

        {{#if favorites}}
          <div class="ui tiny labeled button" tabindex="0" data-action="removeLikes">
            <div class="ui tiny green icon button" data-inverted="" data-tooltip="Fjern fra favoritter" data-position="bottom left">
              <i class="heart icon"></i>
            </div>
            {{#if likes}}
              <a class="ui tiny basic label">
                {{likes}} liker
              </a>
            {{else}}
              <a class="ui tiny basic label">
                Lik
              </a>
            {{/if}}
          </div>
        {{else}}
          <div class="ui tiny labeled button" tabindex="0" data-action="addLikes">
            <div class="ui tiny green icon button" data-inverted="" data-tooltip="Sett som favoritt" data-position="bottom left">
              <i class="heart icon"></i>
            </div>
            {{#if likes}}
              <a class="ui tiny basic label">
                {{likes}}
              </a>
            {{else}}
              <a class="ui tiny basic label">
                Lik
              </a>
            {{/if}}
          </div>
        {{/if}}
        {{#if isOwner}}
          <a class="ui tiny blue button" tabindex="0" href="{{pathFor route='editSong'}}">Endre</a>
          <a class="ui tiny red button deleteSong">Slett</a>
        {{else}}
          {{#if isInRole 'admin'}}
            <a class="ui tiny blue button" tabindex="0" href="{{pathFor route='editSong'}}">Endre</a>
            <a class="ui tiny red button deleteSong">Slett</a>
          {{/if}}
        {{/if}}

      </div>
    </div>

    <div class="ui divider"></div>
    <div class="ui stackable grid">
      <div class="ui six wide column">

        <h1 class="header songTitle">{{title}}</h1>
        <div class="songInfo">
          <div class="ui relaxed divided list">
            <div class="item">Artist: <a href="{{pathFor route='artist'}}">{{artist}}</a></div>
            <div class="item">Sjanger: {{genre}}</div>
            <div class="item">Toneart: {{key}}</div>
            <div class="item">Lagt til av: {{userName}}, {{created}}</div>
          </div>

          {{#if spotify}}
            <iframe id="spotifytrack" src="https://embed.spotify.com/?uri={{spotify}}&theme=white" width="100%" height="80" frameborder="0" allowtransparency="true"></iframe>
          {{/if}}
          {{#if track}}
            <audio controls style="width:100%;">
              <source src="{{track}}">
            </audio>
          {{/if}}
          <div class="ui divider"></div>
          <div class="ui center aligned container">
            <div class="tiny ui buttons">
              {{#if file}}
                <a href="{{file}}" download class="ui compact tiny button" data-inverted="" data-tooltip="Last ned noter" data-position="bottom center">
                  <i class="icon download"></i>
                  Noter
                </a>
              {{/if}}
              {{#if track}}
                <a href="{{file}}" download class="ui compact tiny button" data-inverted="" data-tooltip="Last ned tracks" data-position="bottom center">
                  <i class="icon music"></i>
                  Tracks
                </a>
              {{/if}}
              {{#if chords}}
                <a id="printChords" class="ui compact tiny button" data-inverted="" data-tooltip="Skriv ut akkorder" data-position="bottom center">
                  <i class="icon print"></i>
                  Print
                </a>
              {{/if}}
            </div>
          </div>
        </div>

      </div>
      <div class="ui ten wide column">
        {{#if chords}}
          <pre id="printable" data-key="{{key}}">{{chords}}</pre>
        {{/if}}
        {{#if file}}
          {{#if pdf}}
            <object data="{{file}}" type="application/pdf" class="embedObject"></object>
          {{else}}
            <img src="{{file}}">
          {{/if}}
        {{/if}}
      </div>
    </div>
  </div>
</template>
